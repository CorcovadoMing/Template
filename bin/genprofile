#!/bin/bash

mkdir -p ./profile
cp * ./profile > /dev/null 2>&1

for profile_function in "$@"
do
	target_line="def $profile_function"
	found=`grep -n "$target_line" ./profile/*.py | cut -d ':' -f 1,2`
	file=`echo $found | cut -d ':' -f 1`
	line=`echo $found | cut -d ':' -f 2`
	grep -v '#' $file | grep -v '^$' | sed "$line i @profile" > $file.tmp
	mv $file.tmp $file
done

